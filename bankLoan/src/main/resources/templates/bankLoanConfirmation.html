<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ローン申込確認画面</title>
</head>
<body>
<h1>ローン申込確認画面</h1>
<form action="#" th:action="@{/bankLoanCompletion}" th:object="${bankLoanApplication}" method="post" id="confirmationForm">
    <p>金融機関名: <span th:text="*{bankName}"></span></p>
    <p>支店名: <span th:text="*{branchName}"></span></p>
    <p>口座種別: <span th:text="*{bankAccountType}"></span></p>
    <p>口座番号: <span th:text="*{bankAccountNum}"></span></p>
    <p>申込者名: <span th:text="*{name}"></span></p>
    <p>借入金額(円): <span id="displayLoanAmount" th:text="*{loanAmount}"></span></p>
    <p>借入年収(円): <span id="displayAnnualIncome" th:text="*{annualIncome}"></span></p>
    <p>借入期間(年): <span th:text="*{loanPeriod}"></span></p>
    <p>金利(%): <span th:text="*{interestRate}"></span></p>
    <input type="hidden" id="bankAccountNum" name="bankAccountNum" th:value="*{bankAccountNum}"/>
    <input type="hidden" id="bankName" name="bankName" th:value="*{bankName}"/>
    <input type="hidden" id="branchName" name="branchName" th:value="*{branchName}"/>
    <input type="hidden" id="bankAccountType" name="bankAccountType" th:value="*{bankAccountType}"/>
    <input type="hidden" id="applicantName" name="name" th:value="*{name}"/>
    <input type="hidden" id="loanType" name="loanType" th:value="*{loanType}"/>
    <input type="hidden" id="loanAmount" name="loanAmount" th:value="*{loanAmount}"/>
    <input type="hidden" id="annualIncome" name="annualIncome" th:value="*{annualIncome}"/>
    <input type="hidden" id="loanPeriod" name="loanPeriod" th:value="*{loanPeriod}"/>
    <input type="hidden" id="interestRate" name="interestRate" th:value="*{interestRate}"/>
    <p>
        <input type="button" id="submitButton" value="申込"/>
        <input type="button" value="キャンセル" onclick="window.location='/bankLoan';"/>
    </p>
</form>
<script th:inline="javascript" src="/js/bankLoanConfirmation.js"></script>
<script>
    // 確認画面で数値をフォーマット表示
    document.addEventListener('DOMContentLoaded', function() {
        const loanAmountSpan = document.getElementById('displayLoanAmount');
        const annualIncomeSpan = document.getElementById('displayAnnualIncome');

        if (loanAmountSpan && loanAmountSpan.textContent) {
            loanAmountSpan.textContent = formatNumberWithComma(loanAmountSpan.textContent);
        }

        if (annualIncomeSpan && annualIncomeSpan.textContent) {
            annualIncomeSpan.textContent = formatNumberWithComma(annualIncomeSpan.textContent);
        }
    });
</script>
</body>
</html>