<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="logo" class="logo-header">
    <img th:src="@{/images/rogo.png}" alt="OSFG" class="logo-img"/>
</div>
<div th:fragment="stepBar(currentStep)" class="step-bar">
    <div class="step-item" th:classappend="${currentStep == 1} ? ' active' : ' completed'">
        <div class="step-circle">1</div>
        <div class="step-label">ご注文者情報<br>入力</div>
    </div>
    <div class="step-line" th:classappend="${currentStep > 1} ? ' completed' : ''"></div>
    <div class="step-item" th:classappend="${currentStep == 2} ? ' active' : (${currentStep > 2} ? ' completed' : '')">
        <div class="step-circle">2</div>
        <div class="step-label">内容確認</div>
    </div>
    <div class="step-line" th:classappend="${currentStep > 2} ? ' completed' : ''"></div>
    <div class="step-item" th:classappend="${currentStep == 3} ? ' active' : ''">
        <div class="step-circle">3</div>
        <div class="step-label">注文完了</div>
    </div>
</div>
<div th:fragment="chat">
    <div id="selectionAskBtn" class="selection-ask-btn">💬 AIに聞く</div>
    <div id="chatFab" class="chat-fab">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#bbb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
        </svg>
        <input type="text" id="chatFabInput" class="chat-fab-input" placeholder="なにか聞きたいことはありますか？"/>
        <button id="chatFabSend" class="chat-fab-send-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
        </button>
    </div>
    <div id="chatWindow" class="chat-window">
        <div class="chat-header">
            <span>投資信託アシスタント</span>
            <button id="chatClose" class="chat-close">✕</button>
        </div>
        <div id="chatMessages" class="chat-messages"></div>
        <div class="chat-input-area">
            <div class="chat-search-wrapper">
                <svg class="chat-search-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#bbb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="m21 21-4.35-4.35"/>
                </svg>
                <input type="text" id="chatInput" class="chat-input" placeholder="なにか聞きたいことはありますか？"/>
                <button id="chatSend" class="chat-send-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>
    <script th:src="@{/js/chat.js}"></script>
</div>
</body>
</html>